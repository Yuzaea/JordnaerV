@page
@model Jordnaer.Pages.Items.IndexModel
@{
    ViewData["Title"] = "Show Items";
}

<h2>Show All Items</h2>

<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th>Description</th>
            <th>Type</th>
            <th>Delete</th>
            <th>Update</th>
            <th>Image (Doesn't work)</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Items)
        {
            <tr>
                <td>@item.ItemID</td>
                <td>@item.ItemName</td>
                <td>@item.ItemPrice</td>
                <td>@item.ItemDescription</td>
                <td>@item.ItemType</td>

                <td>
                    <form method="post" asp-page="Delete" asp-route-id="@item.ItemID" onsubmit="return confirm('Are you sure you want to delete this item?');">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
                <td>
                    <a href="/Items/Update?id=@item.ItemID" class="btn btn-danger">Update</a>
                </td>
<td>
    <img src="@item.ItemImg" alt="Item Image" />
@*    <input type="number" min="1" value="1" id="quantity-@item.ItemID" />
                    <button type="button" data-item-id="@item.ItemID">Add to Basket</button>*@




</td>
            </tr>
        }
    </tbody>
</table>



@*<script>
    document.addEventListener('DOMContentLoaded', function () {
        var buttons = document.querySelectorAll('button[data-item-id]');
        buttons.forEach(function (button) {
            button.addEventListener('click', addToBasket);
        });
    });

    // Event handler for the button click
    function addToBasket(event) {
        var button = event.target;
        var itemId = button.dataset.itemId;
        var quantityInput = document.getElementById('quantity-' + itemId);
        var quantity = parseInt(quantityInput.value);

        var item = {
            itemId: itemId,
            quantity: quantity
        };

        // Send the item data to the server to add it to the basket
        fetch('/Basket/AddItem', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(item)
        })
            .then(function (response) {
                // Handle the response from the server if needed
                console.log('Item added to basket');
            })
            .catch(function (error) {
                // Handle any errors that occur during the request
                console.error('Failed to add item to basket', error);
            });
    }
    }
</script>*@








